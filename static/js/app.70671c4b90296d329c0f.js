webpackJsonp([1],{"+4bW":function(t,e){},"0LL4":function(t,e){},"4BAW":function(t,e){},"6EUC":function(t,e){},"8SSc":function(t,e){},NHnr:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=a("7+uW");!function(){if("undefined"!=typeof document){var t=document.head||document.getElementsByTagName("head")[0],e=document.createElement("style"),a=" *[data-v-5928e1c7] { -webkit-box-sizing: border-box; box-sizing: border-box; } .fullscreen-v-img[data-v-5928e1c7] { z-index: 9999; height: 100%; width: 100%; position: fixed; top: 0; left: 0; overflow: hidden; background-color: rgba(0, 0, 0, 0.7); -ms-touch-action: none; touch-action: none; } .content-v-img img[data-v-5928e1c7] { width: auto; height: auto; max-width: 100%; max-height: 100%; position: absolute; top: 0; left: 0; right: 0; bottom: 0; margin: auto; -webkit-user-select: none; -moz-user-select: none; -ms-user-select: none; user-select: none; } .header-v-img[data-v-5928e1c7], .footer-v-img[data-v-5928e1c7] { position: absolute; width: 100%; background-color: rgba(0, 0, 0, 0.3); height: 50px; z-index: 9999; display: flex; align-items: center; } .header-v-img[data-v-5928e1c7] { justify-content: space-between; } .footer-v-img[data-v-5928e1c7] { bottom: 0; justify-content: center; height: 70px; /* scrolling thumbnails on mobile */ overflow-x: auto; } .footer-v-img img[data-v-5928e1c7] { width: 60px; height: 60px; cursor: pointer; -webkit-transition: transform 0.2s ease-out; transition: transform 0.2s ease-out; object-fit: cover; -webkit-user-select: none; -moz-user-select: none; -ms-user-select: none; user-select: none; } .footer-v-img img.is-selected[data-v-5928e1c7] { transform: scale(1.1); } .footer-v-img img[data-v-5928e1c7]:not(:last-child) { margin-right: 7px; } .title-v-img[data-v-5928e1c7] { font-family: 'Avenir', Helvetica, Arial, sans-serif; font-size: 18px; font-weight: 400; color: white; text-align: center; max-height: 100%; overflow: auto; } .count-v-img[data-v-5928e1c7], .buttons-v-img[data-v-5928e1c7] { width: 80px; font-family: 'Avenir', Helvetica, Arial, sans-serif; } .count-v-img[data-v-5928e1c7] { font-size: 15px; color: white; margin-left: 10px; } .buttons-v-img[data-v-5928e1c7] { margin-right: 10px; text-align: right; } .buttons-v-img span path[data-v-5928e1c7] { fill: #e5e6eb; -webkit-transition: fill 0.4s ease-in-out; transition: fill 0.4s ease-in-out; } .buttons-v-img span[data-v-5928e1c7] { cursor: pointer; color: #e5e6eb; font-size: 30px; -webkit-transition: color 0.4s ease-in-out; transition: color 0.4s ease-in-out; text-decoration: none; text-align: center; } .buttons-v-img span[data-v-5928e1c7]:not(:last-child) { margin-right: 8px; } .buttons-v-img span svg[data-v-5928e1c7] { height: 20px; width: 15px; } .buttons-v-img span:hover svg path[data-v-5928e1c7] { fill: white; } .buttons-v-img span[data-v-5928e1c7]:hover { color: white; } .prev-v-img svg[data-v-5928e1c7], .next-v-img svg[data-v-5928e1c7] { margin: 5px auto; } .prev-v-img[data-v-5928e1c7], .next-v-img[data-v-5928e1c7] { color: white; width: 35px; height: 35px; position: absolute; top: 50%; margin-top: -12.5px; font-size: 15px; font-family: 'Avenir', Helvetica, Arial, sans-serif; text-align: center; background-color: rgba(0, 0, 0, 0.3); z-index: 1000; opacity: 0.3; -webkit-transition: opacity 0.3s ease-in-out; transition: opacity 0.3s ease-in-out; cursor: pointer; } .prev-v-img[data-v-5928e1c7]:hover, .next-v-img[data-v-5928e1c7]:hover { opacity: 1; } .prev-v-img[data-v-5928e1c7] { left: 10px; } .next-v-img[data-v-5928e1c7] { right: 10px; } .v-img-fade-enter[data-v-5928e1c7], .v-img-fade-leave-to[data-v-5928e1c7] { opacity: 0; } .v-img-fade-enter-active[data-v-5928e1c7], .v-img-fade-leave-active[data-v-5928e1c7] { -webkit-transition: opacity 0.3s ease-in-out; transition: opacity 0.3s ease-in-out; } ";e.type="text/css",e.styleSheet?e.styleSheet.cssText=a:e.appendChild(document.createTextNode(a)),t.appendChild(e)}}();var n={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("transition",{attrs:{appear:"",name:"v-img-fade"}},[t.closed?t._e():a("div",{staticClass:"fullscreen-v-img",on:{click:function(e){if(e.target!==e.currentTarget)return null;t.close(e)}}},[a("div",{staticClass:"header-v-img"},[a("span",{staticClass:"count-v-img"},[t.images.length>1?a("span",[t._v(t._s(t.currentImageIndex+1)+"/"+t._s(t.images.length)+" ")]):t._e()]),a("span",{staticClass:"title-v-img"},[t._v(t._s(t.titles[t.currentImageIndex]))]),a("div",{staticClass:"buttons-v-img"},[t.sourceButtons[t.currentImageIndex]?a("span",[a("a",{attrs:{href:t.images[t.currentImageIndex],target:"_blank"}},[a("svg",{staticStyle:{"enable-background":"new 0 0 475.078 475.077"},attrs:{xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",version:"1.1",id:"Capa_1",x:"0px",y:"0px",width:"512px",height:"512px",viewBox:"0 0 475.078 475.077","xml:space":"preserve"}},[a("path",{attrs:{d:"M467.083,318.627c-5.324-5.328-11.8-7.994-19.41-7.994H315.195l-38.828,38.827c-11.04,10.657-23.982,15.988-38.828,15.988    c-14.843,0-27.789-5.324-38.828-15.988l-38.543-38.827H27.408c-7.612,0-14.083,2.669-19.414,7.994    C2.664,323.955,0,330.427,0,338.044v91.358c0,7.614,2.664,14.085,7.994,19.414c5.33,5.328,11.801,7.99,19.414,7.99h420.266    c7.61,0,14.086-2.662,19.41-7.99c5.332-5.329,7.994-11.8,7.994-19.414v-91.358C475.078,330.427,472.416,323.955,467.083,318.627z     M360.025,414.841c-3.621,3.617-7.905,5.424-12.854,5.424s-9.227-1.807-12.847-5.424c-3.614-3.617-5.421-7.898-5.421-12.844    c0-4.948,1.807-9.236,5.421-12.847c3.62-3.62,7.898-5.431,12.847-5.431s9.232,1.811,12.854,5.431    c3.613,3.61,5.421,7.898,5.421,12.847C365.446,406.942,363.638,411.224,360.025,414.841z M433.109,414.841    c-3.614,3.617-7.898,5.424-12.848,5.424c-4.948,0-9.229-1.807-12.847-5.424c-3.613-3.617-5.42-7.898-5.42-12.844    c0-4.948,1.807-9.236,5.42-12.847c3.617-3.62,7.898-5.431,12.847-5.431c4.949,0,9.233,1.811,12.848,5.431    c3.617,3.61,5.427,7.898,5.427,12.847C438.536,406.942,436.729,411.224,433.109,414.841z",fill:"#FFFFFF"}}),a("path",{attrs:{d:"M224.692,323.479c3.428,3.613,7.71,5.421,12.847,5.421c5.141,0,9.418-1.808,12.847-5.421l127.907-127.908    c5.899-5.519,7.234-12.182,3.997-19.986c-3.23-7.421-8.847-11.132-16.844-11.136h-73.091V36.543c0-4.948-1.811-9.231-5.421-12.847    c-3.62-3.617-7.901-5.426-12.847-5.426h-73.096c-4.946,0-9.229,1.809-12.847,5.426c-3.615,3.616-5.424,7.898-5.424,12.847V164.45    h-73.089c-7.998,0-13.61,3.715-16.846,11.136c-3.234,7.801-1.903,14.467,3.999,19.986L224.692,323.479z",fill:"#FFFFFF"}})])])]):t._e(),a("span",{on:{click:t.close}},[t._v("Ã—")])])]),a("transition",{attrs:{appear:"",name:"v-img-fade"}},[t.visibleUI&&1!==t.images.length?a("span",{staticClass:"prev-v-img",on:{click:t.prev}},[a("svg",{attrs:{width:"25",height:"25",viewBox:"0 0 1792 1915",xmlns:"http://www.w3.org/2000/svg"}},[a("path",{attrs:{d:"M1664 896v128q0 53-32.5 90.5t-84.5 37.5h-704l293 294q38 36 38 90t-38 90l-75 76q-37 37-90 37-52 0-91-37l-651-652q-37-37-37-90 0-52 37-91l651-650q38-38 91-38 52 0 90 38l75 74q38 38 38 91t-38 91l-293 293h704q52 0 84.5 37.5t32.5 90.5z",fill:"#fff"}})])]):t._e()]),a("transition",{attrs:{appear:"",name:"v-img-fade"}},[t.visibleUI&&1!==t.images.length?a("span",{staticClass:"next-v-img",on:{click:t.next}},[a("svg",{attrs:{width:"25",height:"25",viewBox:"0 0 1792 1915",xmlns:"http://www.w3.org/2000/svg"}},[a("path",{attrs:{d:"M1600 960q0 54-37 91l-651 651q-39 37-91 37-51 0-90-37l-75-75q-38-38-38-91t38-91l293-293h-704q-52 0-84.5-37.5t-32.5-90.5v-128q0-53 32.5-90.5t84.5-37.5h704l-293-294q-38-36-38-90t38-90l75-75q38-38 90-38 53 0 91 38l651 651q37 35 37 90z",fill:"#fff"}})])]):t._e()]),t.thumbnails&&t.images.length>1?a("div",{staticClass:"footer-v-img"},t._l(t.images,function(e,i){return a("img",{key:i,class:{"is-selected":t.currentImageIndex==i},attrs:{src:e},on:{click:function(e){t.select(i)}}})})):t._e(),a("div",{staticClass:"content-v-img"},[a("img",{attrs:{src:t.images[t.currentImageIndex]},on:{click:t.next}})])],1)])},staticRenderFns:[],_scopeId:"data-v-5928e1c7",data:function(){return{images:[],titles:[],sourceButtons:[],visibleUI:!0,currentImageIndex:0,closed:!0,uiTimeout:null,handlers:{},thumbnails:!1}},watch:{closed:function(t){t&&this.handlers.closed&&this.handlers.closed(),!t&&this.handlers.opened&&this.handlers.opened()}},methods:{fireChangeEvent:function(){this.handlers.changed&&this.handlers.changed(this.currentImageIndex)},close:function(){this.closed||(document.querySelector("body").classList.remove("body-fs-v-img"),this.images=[],this.currentImageIndex=0,this.closed=!0)},next:function(){!this.closed&&this.images.length>1&&(this.currentImageIndex+1<this.images.length?this.currentImageIndex++:this.currentImageIndex=0,this.fireChangeEvent())},select:function(t){this.currentImageIndex=t},prev:function(){!this.closed&&this.images.length>1&&(this.currentImageIndex>0?this.currentImageIndex--:this.currentImageIndex=this.images.length-1,this.fireChangeEvent())},showUI:function(){var t=this;this.closed||(clearTimeout(this.uiTimeout),this.visibleUI=!0,this.uiTimeout=setTimeout(function(){t.visibleUI=!1},3500))}},created:function(){var t=this;window.addEventListener("keyup",function(e){27!==e.keyCode&&81!==e.keyCode||t.close(),39!==e.keyCode&&76!==e.keyCode||t.next(),37!==e.keyCode&&72!==e.keyCode||t.prev()}),window.addEventListener("scroll",function(){t.close()}),window.addEventListener("mousemove",function(){t.showUI()})}},o=(function(){function t(t){this.value=t}function e(e){function a(n,o){try{var s=e[n](o),r=s.value;r instanceof t?Promise.resolve(r.value).then(function(t){a("next",t)},function(t){a("throw",t)}):i(s.done?"return":"normal",s.value)}catch(t){i("throw",t)}}function i(t,e){switch(t){case"return":n.resolve({value:e,done:!0});break;case"throw":n.reject(e);break;default:n.resolve({value:e,done:!1})}(n=n.next)?a(n.key,n.arg):o=null}var n,o;this._invoke=function(t,e){return new Promise(function(i,s){var r={key:t,arg:e,resolve:i,reject:s,next:null};o?o=o.next=r:(n=o=r,a(t,e))})},"function"!=typeof e.return&&(this.return=void 0)}"function"==typeof Symbol&&Symbol.asyncIterator&&(e.prototype[Symbol.asyncIterator]=function(){return this}),e.prototype.next=function(t){return this._invoke("next",t)},e.prototype.throw=function(t){return this._invoke("throw",t)},e.prototype.return=function(t){return this._invoke("return",t)}}(),Object.assign||function(t){for(var e=1;e<arguments.length;e++){var a=arguments[e];for(var i in a)Object.prototype.hasOwnProperty.call(a,i)&&(t[i]=a[i])}return t}),s=function(t,e,a){var i="pointer",n=e.arg||null,o=void 0,s=void 0,r=t.src,l=void 0,c=void 0,u={};return a.altAsTitle&&(l=t.alt),o=a.openOn,s=a.sourceButton,c=a.thumbnails,void 0!==e.value&&(i=e.value.cursor||i,n=e.value.group||n,o=e.value.openOn||o,r=e.value.src||r,l=e.value.title||l,u.opened=e.value.opened,u.closed=e.value.closed,u.changed=e.value.changed,void 0!==e.value.sourceButton&&(s=e.value.sourceButton),void 0!==e.value.thumbnails&&(c=e.value.thumbnails)),t.setAttribute("data-vue-img-src",r),n&&t.setAttribute("data-vue-img-group",n),l&&t.setAttribute("data-vue-img-title",l),s&&t.setAttribute("data-vue-img-source-button",s),c&&t.setAttribute("data-vue-img-thumbnails",c),r||console.error("v-img element missing src parameter."),t.style.cursor=i,{cursor:i,src:r,group:n,title:l,events:u,sourceButton:s,openOn:o,thumbnails:c}},r=function(t,e){var a=t.extend(n);e=o({altAsTitle:!1,sourceButton:!1,thumbnails:!1,openOn:"click"},e),t.directive("img",{update:function(t,a,i,n){var o=void 0,r=void 0;n.data.attrs&&i.data.attrs&&(r=n.data.attrs.src!==i.data.attrs.src,e.altAsTitle&&(o=n.data.attrs.alt!==i.data.attrs.alt));var l=a.oldValue!==a.value;(r||o||l)&&s(t,a,e)},bind:function(i,n){var o=s(i,n,e),r=window.vueImg;if(!r){var l=document.createElement("div");l.setAttribute("id","imageScreen"),document.querySelector("body").appendChild(l),r=window.vueImg=(new a).$mount("#imageScreen")}i.addEventListener(o.openOn,function(){var e=void 0;e=i.dataset.vueImgGroup?[].concat(function(t){if(Array.isArray(t)){for(var e=0,a=Array(t.length);e<t.length;e++)a[e]=t[e];return a}return Array.from(t)}(document.querySelectorAll('img[data-vue-img-group="'+i.dataset.vueImgGroup+'"]'))):[i],t.set(r,"images",e.map(function(t){return t.dataset.vueImgSrc})),t.set(r,"titles",e.map(function(t){return t.dataset.vueImgTitle})),t.set(r,"sourceButtons",e.map(function(t){return"true"===t.dataset.vueImgSourceButton})),t.set(r,"thumbnails","true"===i.dataset.vueImgThumbnails),t.set(r,"currentImageIndex",e.indexOf(i)),t.set(r,"handlers",o.events),t.set(r,"closed",!1)})}})};"undefined"!=typeof window&&window.Vue&&window.Vue.use(r);var l=r,c=a("kxiW"),u=a.n(c),d={name:"Navbar",data:function(){return{user:null}},created:function(){var t=this;u.a.auth().onAuthStateChanged(function(e){t.user=e})},methods:{toggleBurger:function(){document.getElementById("hamburger").classList.toggle("change"),document.getElementById("myLinksHumburger").classList.toggle("block")},logout:function(){var t=this;u.a.auth().signOut().then(function(){t.$router.push({name:"Login"})})}}},m={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"navbar",attrs:{id:"navbar"}},[a("nav",{staticClass:"deep-purple darken-1"},[a("div",{staticClass:"container"},[a("router-link",{staticClass:"left",attrs:{to:{name:"AllLocations"}}},[a("span",{staticClass:"brand-logo"},[a("i",{staticClass:"fa fa-home",staticStyle:{margin:"20px 0 0 0"},attrs:{"aria-hidden":"true"}}),t._v(" "),a("span",{attrs:{id:"logo"}},[t._v("MieszkankoSzukanko")])])]),t._v(" "),a("ul",{staticClass:"right",attrs:{id:"myLinks"}},[t.user?t._e():a("li",[a("router-link",{attrs:{to:{name:"Signup"}}},[t._v("Signup")])],1),t._v(" "),t.user?t._e():a("li",[a("router-link",{attrs:{to:{name:"Login"}}},[t._v("Login")])],1),t._v(" "),t.user?a("li",[a("router-link",{attrs:{to:{name:"NewLocation"}}},[t._v("Add new location")])],1):t._e(),t._v(" "),t.user?a("li",[a("router-link",{attrs:{to:{name:"ViewProfile"}}},[t._v("Your profile")])],1):t._e(),t._v(" "),t.user?a("li",[a("router-link",{attrs:{to:{name:"UserLocations"}}},[t._v("Your locations")])],1):t._e(),t._v(" "),t.user?a("li",[a("a",{on:{click:t.logout}},[t._v("Logout")])]):t._e()]),t._v(" "),a("div",{staticClass:"right",attrs:{id:"hamburger"},on:{click:t.toggleBurger}},[a("div",{staticClass:"bar1"}),t._v(" "),a("div",{staticClass:"bar2"}),t._v(" "),a("div",{staticClass:"bar3"})])],1)]),t._v(" "),a("div",{staticClass:"deep-purple darken-1 none",attrs:{id:"myLinksHumburger"},on:{click:t.toggleBurger}},[a("router-link",{attrs:{to:{name:"Signup"}}},[t.user?t._e():a("div",{staticClass:"center field"},[t._v("Signup")])]),t._v(" "),a("router-link",{attrs:{to:{name:"Login"}}},[t.user?t._e():a("div",{staticClass:"center field"},[t._v("Login")])]),t._v(" "),a("router-link",{attrs:{to:{name:"NewLocation"}}},[t.user?a("div",{staticClass:"center field"},[t._v("Add new location")]):t._e()]),t._v(" "),a("router-link",{attrs:{to:{name:"ViewProfile"}}},[t.user?a("div",{staticClass:"center field"},[t._v("Your profile")]):t._e()]),t._v(" "),a("router-link",{attrs:{to:{name:"UserLocations"}}},[t.user?a("div",{staticClass:"center field"},[t._v("Your locations")]):t._e()]),t._v(" "),a("a",{on:{click:t.logout}},[t.user?a("div",{staticClass:"center field"},[t._v("Logout")]):t._e()])],1)])},staticRenderFns:[]};var p={name:"App",components:{Navbar:a("VU/8")(d,m,!1,function(t){a("fvCD")},"data-v-1911b410",null).exports}},v={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{attrs:{id:"app"}},[e("Navbar"),this._v(" "),e("router-view")],1)},staticRenderFns:[]};var h=a("VU/8")(p,v,!1,function(t){a("4BAW")},null,null).exports,f=a("/ocq"),g=a("Gu7T"),_=a.n(g),y=a("Dd8w"),b=a.n(y),w=(a("881v"),u.a.initializeApp({apiKey:"AIzaSyD3PvboTyHdrjFFm8ExoEyFruWZhu3wIo0",authDomain:"mieszkankoszukanko-dadb0.firebaseapp.com",databaseURL:"https://mieszkankoszukanko-dadb0.firebaseio.com",projectId:"mieszkankoszukanko-dadb0",storageBucket:"mieszkankoszukanko-dadb0.appspot.com",messagingSenderId:"147638323664",appId:"1:147638323664:web:b43dc281f41938176511d5",measurementId:"G-B4K0YM7Q83"}));u.a.analytics();var C=w.firestore(),k=a("6Ehs"),x={name:"AllLocations",mixins:[a.n(k).a],data:function(){return{lat:0,lng:0,userLat:0,userLng:0,searchData:{priceMin:null,priceMax:null,maxDistance:null,minSurface:null,smoking:!1,pets:!1},allLocations:[],locations:[],loaded:!1,message:""}},methods:{search:function(){this.toggleSearchCriteria(),this.filterLocations(),this.renderMap(),this.renderLocations()},toggleSearchCriteria:function(){"block"==document.getElementById("searchCriteria").style.display?(document.getElementById("searchCriteria").style.display="none",document.getElementById("map").classList.remove("blured"),document.getElementById("searchButton").style.display="block"):(document.getElementById("searchCriteria").style.display="block",document.getElementById("map").classList.add("blured"),document.getElementById("searchButton").style.display="none")},updateUserGeolocation:function(){var t=this,e=u.a.auth().currentUser;navigator.geolocation&&navigator.geolocation.getCurrentPosition(function(a){t.lat||(t.lat=a.coords.latitude,t.lng=a.coords.longitude),t.getLocations(),C.collection("users").where("user_id","==",e.uid).get().then(function(t){t.forEach(function(t){C.collection("users").doc(t.id).update({geolocation:{lat:a.coords.latitude,lng:a.coords.longitude}})})})})},renderMap:function(){this.map=new google.maps.Map(document.getElementById("map"),{center:{lat:this.lat,lng:this.lng},zoom:6,maxZoom:15,minZoom:3}),this.userMarker=new google.maps.Marker({position:{lat:this.lat,lng:this.lng},map:this.map,draggable:!0,title:"Your current position",icon:{url:"http://maps.google.com/mapfiles/ms/icons/blue-dot.png"}});var t=this;(google.maps.event.addListener(this.userMarker,"drag",function(){t.lat=t.userMarker.position.lat(),t.lng=t.userMarker.position.lng()}),this.loaded)||(new google.maps.InfoWindow({content:"Yout current position - you can drag this marker!"}).open(map,t.userMarker),this.loaded=!0)},renderLocations:function(){var t=this;this.locations.forEach(function(e){e.lat&&e.lng&&new google.maps.Marker({position:{lat:e.lat,lng:e.lng},map:t.map,title:e.title}).addListener("click",function(){t.$router.push({name:"ViewLocation",params:{id:e.id}})})})},filterLocations:function(){var t=this;this.locations=this.allLocations.filter(function(e){var a=!0;return t.searchData.priceMin&&(a=a&&parseInt(e.price)>t.searchData.priceMin),t.searchData.priceMax&&(a=a&&parseInt(e.price)<t.searchData.priceMax),t.searchData.smoking&&(a=a&&e.smoking),t.searchData.pets&&(a=a&&e.pets),t.searchData.maxDistance&&(a=a&&t.distance(t.userMarker.position.lat(),t.userMarker.position.lng(),e.lat,e.lng)<t.searchData.maxDistance),a})},getLocations:function(){var t=this;this.locations=[],C.collection("locations").get().then(function(e){e.docs.forEach(function(e){t.locations.push(b()({},e.data(),{id:e.id}))}),t.allLocations=[].concat(_()(t.locations)),t.renderMap(),t.filterLocations(),t.renderLocations()})},distance:function(t,e,a,i){if(t==a&&e==i)return 0;var n=Math.PI*t/180,o=Math.PI*a/180,s=e-i,r=Math.PI*s/180,l=Math.sin(n)*Math.sin(o)+Math.cos(n)*Math.cos(o)*Math.cos(r);return l>1&&(l=1),l=60*(l=180*(l=Math.acos(l))/Math.PI)*1.1515,l*=1.609344},getSaveStateConfig:function(){return{cacheKey:"AllLocations"}},hidePopUp:function(){this.message=null}},mounted:function(){this.message=this.$route.params.message,this.updateUserGeolocation()}},I={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",{staticClass:"field margin10"},[a("button",{staticClass:"btn btn-large deep-purple",attrs:{id:"searchButton"},on:{click:function(e){return e.preventDefault(),t.toggleSearchCriteria(e)}}},[t._v("Advanced search "),a("i",{staticClass:"fa fa-search"})])]),t._v(" "),a("div",{staticClass:"popup"},[t.message?a("span",{staticClass:"popuptext",attrs:{id:"myPopup"},on:{click:t.hidePopUp}},[t._v(t._s(t.message))]):t._e()]),t._v(" "),a("div",{staticClass:"map"},[a("div",{staticClass:"google-map",attrs:{id:"map"}}),t._v(" "),a("div",{staticClass:"my-container container my-container",attrs:{id:"searchCriteria"}},[a("div",{staticClass:"card-panel"},[a("h2",{staticClass:"center deep-purple-text"},[t._v("Search criteria")]),t._v(" "),a("div",{staticClass:"field"},[a("label",{attrs:{for:"priceMin"}},[t._v("Minimum price (PLN)")]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.searchData.priceMin,expression:"searchData.priceMin"}],attrs:{id:"priceMin",type:"number"},domProps:{value:t.searchData.priceMin},on:{input:function(e){e.target.composing||t.$set(t.searchData,"priceMin",e.target.value)}}})]),t._v(" "),a("div",{staticClass:"field"},[a("label",{attrs:{for:"priceMax"}},[t._v("Maximum price (PLN)")]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.searchData.priceMax,expression:"searchData.priceMax"}],attrs:{id:"priceMax",type:"number"},domProps:{value:t.searchData.priceMax},on:{input:function(e){e.target.composing||t.$set(t.searchData,"priceMax",e.target.value)}}})]),t._v(" "),a("div",{staticClass:"field"},[a("label",{attrs:{for:"maxDistance"}},[t._v("Maximum distance from Yout current location (KM)")]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.searchData.maxDistance,expression:"searchData.maxDistance"}],attrs:{id:"maxDistance",type:"number"},domProps:{value:t.searchData.maxDistance},on:{input:function(e){e.target.composing||t.$set(t.searchData,"maxDistance",e.target.value)}}})]),t._v(" "),a("div",{staticClass:"field"},[a("label",{attrs:{for:"minSurface"}},[t._v("Minimum surface (square meters)")]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.searchData.minSurface,expression:"searchData.minSurface"}],attrs:{id:"minSurface",type:"number"},domProps:{value:t.searchData.minSurface},on:{input:function(e){e.target.composing||t.$set(t.searchData,"minSurface",e.target.value)}}})]),t._v(" "),a("div",{staticClass:"field"},[a("label",[a("input",{directives:[{name:"model",rawName:"v-model",value:t.searchData.smoking,expression:"searchData.smoking"}],attrs:{type:"checkbox"},domProps:{checked:Array.isArray(t.searchData.smoking)?t._i(t.searchData.smoking,null)>-1:t.searchData.smoking},on:{change:function(e){var a=t.searchData.smoking,i=e.target,n=!!i.checked;if(Array.isArray(a)){var o=t._i(a,null);i.checked?o<0&&t.$set(t.searchData,"smoking",a.concat([null])):o>-1&&t.$set(t.searchData,"smoking",a.slice(0,o).concat(a.slice(o+1)))}else t.$set(t.searchData,"smoking",n)}}}),t._v(" "),a("span",[t._v("Smoking allowed")])])]),t._v(" "),a("div",{staticClass:"field"},[a("label",[a("input",{directives:[{name:"model",rawName:"v-model",value:t.searchData.pets,expression:"searchData.pets"}],attrs:{type:"checkbox"},domProps:{checked:Array.isArray(t.searchData.pets)?t._i(t.searchData.pets,null)>-1:t.searchData.pets},on:{change:function(e){var a=t.searchData.pets,i=e.target,n=!!i.checked;if(Array.isArray(a)){var o=t._i(a,null);i.checked?o<0&&t.$set(t.searchData,"pets",a.concat([null])):o>-1&&t.$set(t.searchData,"pets",a.slice(0,o).concat(a.slice(o+1)))}else t.$set(t.searchData,"pets",n)}}}),t._v(" "),a("span",[t._v("Pets allowed")])])]),t._v(" "),a("div",{staticClass:"field center"},[a("button",{staticClass:"btn btn-large deep-purple",on:{click:function(e){return e.preventDefault(),t.search(e)}}},[t._v("Search "),a("i",{staticClass:"fa fa-search"})])])])])])])},staticRenderFns:[]};var D=a("VU/8")(x,I,!1,function(t){a("+4bW")},null,null).exports,M={name:"Signup",data:function(){return{email:null,password:null,errorMessage:null,slug:null}},methods:{signup:function(){var t=this;if(this.email&&this.password){this.errorMessage=null;var e=C.collection("users").doc(this.email);e.get().then(function(a){a.exists?t.errorMessage="This email is already taken":u.a.auth().createUserWithEmailAndPassword(t.email,t.password).then(function(t){e.set({geolocation:null,user_id:t.user.uid})}).then(function(){t.$router.push({name:"AllLocations"})}).catch(function(e){t.errorMessage=e.message})})}else this.errorMessage="Please fill in all fields"}}},L={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"signup container"},[a("form",{staticClass:"card-panel",on:{submit:function(e){return e.preventDefault(),t.signup(e)}}},[a("h2",{staticClass:"center deep-purple-text"},[t._v("Signup")]),t._v(" "),a("div",{staticClass:"field"},[a("label",{attrs:{for:"email"}},[t._v("Email")]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.email,expression:"email"}],attrs:{id:"email",type:"email"},domProps:{value:t.email},on:{input:function(e){e.target.composing||(t.email=e.target.value)}}})]),t._v(" "),a("div",{staticClass:"field"},[a("label",{attrs:{for:"password"}},[t._v("Password")]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.password,expression:"password"}],attrs:{id:"password",type:"password"},domProps:{value:t.password},on:{input:function(e){e.target.composing||(t.password=e.target.value)}}})]),t._v(" "),t.errorMessage?a("p",{staticClass:"red-text center"},[t._v(t._s(t.errorMessage))]):t._e(),t._v(" "),t._m(0)])])},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"field center"},[e("button",{staticClass:"btn deep-purple"},[this._v("Signup")])])}]};var E=a("VU/8")(M,L,!1,function(t){a("6EUC")},null,null).exports,A={name:"Login",data:function(){return{email:null,password:null,errorMessage:null}},methods:{login:function(){var t=this;this.email&&this.password?(this.errorMessage=null,u.a.auth().signInWithEmailAndPassword(this.email,this.password).then(function(e){t.$router.push({name:"AllLocations"})}).catch(function(e){t.errorMessage=e.message})):this.errorMessage="Please fill in both fields"}}},P={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"auth container"},[a("form",{staticClass:"card-panel",on:{submit:function(e){return e.preventDefault(),t.login(e)}}},[a("h2",{staticClass:"center deep-purple-text"},[t._v("Login")]),t._v(" "),a("div",{staticClass:"field"},[a("label",{attrs:{for:"email"}},[t._v("Email")]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.email,expression:"email"}],attrs:{id:"email",type:"email"},domProps:{value:t.email},on:{input:function(e){e.target.composing||(t.email=e.target.value)}}})]),t._v(" "),a("div",{staticClass:"field"},[a("label",{attrs:{for:"password"}},[t._v("Password")]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.password,expression:"password"}],attrs:{id:"password",type:"password"},domProps:{value:t.password},on:{input:function(e){e.target.composing||(t.password=e.target.value)}}})]),t._v(" "),t.errorMessage?a("p",{staticClass:"red-text center"},[t._v(t._s(t.errorMessage))]):t._e(),t._v(" "),t._m(0)])])},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"field center"},[e("button",{staticClass:"btn deep-purple"},[this._v("Login")])])}]};var N=a("VU/8")(A,P,!1,function(t){a("NW/g")},null,null).exports,S={name:"ViewProfile",data:function(){return{profile:{},errorMessage:null}},methods:{saveUserData:function(){var t=this;this.profile.email?C.collection("users").where("user_id","==",u.a.auth().currentUser.uid).get().then(function(e){e.forEach(function(e){C.collection("users").doc(e.id).update({phoneNumber:t.profile.phoneNumber||"",otherCommunication:t.profile.otherCommunication||"",name:t.profile.name||"",email:t.profile.email||""})}),t.$router.push({name:"AllLocations",params:{message:"Data saved succesfully!"}})}):this.errorMessage="Please fill in all mandatory fields"}},created:function(){var t=this;C.collection("users").where("user_id","==",u.a.auth().currentUser.uid).get().then(function(e){e.forEach(function(e){t.profile=e.data(),t.profile.id=e.id,t.profile.email=t.profile.email||e.id})})}},$={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"my-container container",attrs:{id:"mainContainer"}},[a("form",{staticClass:"card-panel",on:{submit:function(e){return e.preventDefault(),t.saveUserData(e)}}},[a("h2",{staticClass:"center deep-purple-text"},[t._v("Your data")]),t._v(" "),a("div",{staticClass:"field"},[a("label",{attrs:{for:"name"}},[t._v("Name")]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.profile.name,expression:"profile.name"}],attrs:{id:"name",type:"text"},domProps:{value:t.profile.name},on:{input:function(e){e.target.composing||t.$set(t.profile,"name",e.target.value)}}})]),t._v(" "),a("div",{staticClass:"field"},[a("label",{attrs:{for:"phoneNumber"}},[t._v("Phone number")]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.profile.phoneNumber,expression:"profile.phoneNumber"}],attrs:{id:"phoneNumber",type:"text"},domProps:{value:t.profile.phoneNumber},on:{input:function(e){e.target.composing||t.$set(t.profile,"phoneNumber",e.target.value)}}})]),t._v(" "),a("div",{staticClass:"field"},[a("label",{attrs:{for:"phoneNumber"}},[t._v("Email*")]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.profile.email,expression:"profile.email"}],attrs:{id:"phoneNumber",type:"text"},domProps:{value:t.profile.email},on:{input:function(e){e.target.composing||t.$set(t.profile,"email",e.target.value)}}})]),t._v(" "),a("div",{staticClass:"field"},[a("label",{attrs:{for:"other"}},[t._v("Other way of communication")]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.profile.otherCommunication,expression:"profile.otherCommunication"}],attrs:{id:"other",type:"text"},domProps:{value:t.profile.otherCommunication},on:{input:function(e){e.target.composing||t.$set(t.profile,"otherCommunication",e.target.value)}}})]),t._v(" "),t.errorMessage?a("p",{staticClass:"red-text center"},[t._v(t._s(t.errorMessage))]):t._e(),t._v(" "),t._m(0)])])},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"field center margin10"},[e("button",{staticClass:"btn deep-purple"},[this._v("Save")])])}]};var U=a("VU/8")(S,$,!1,function(t){a("rKFi")},null,null).exports,B={name:"NewLocation",data:function(){return{title:"",city:"",street:"",postalCode:"",addInfo:"",price:0,errorMessage:"",imagesData:[],lat:null,lng:null,marker:null,pets:!0,smoking:!0,surface:0}},methods:{showMap:function(){document.getElementById("map").style.display="block",document.getElementById("btnSave").style.display="block",document.getElementById("mainContainer").style.display="none"},closeMap:function(){document.getElementById("map").style.display="none",document.getElementById("btnSave").style.display="none",document.getElementById("mainContainer").style.display="block",this.lat=this.marker.position.lat(),this.lng=this.marker.position.lng(),this.fetchLocationDataBasedOnLatLng()},onFilePicked:function(t){var e=this,a=t.target.files,i=(a[0].name,new FileReader);i.addEventListener("load",function(){e.imagesData.push({url:i.result,photo:a[0],key:u.a.auth().currentUser.uid+"_"+a[0].name})}),i.readAsDataURL(a[0])},addNewLocation:function(){var t=this;this.title&&this.city&&this.street&&this.addInfo&&this.lat&&this.price&&this.surface?(this.errorMessage=null,C.collection("locations").add({title:this.title,ownerId:u.a.auth().currentUser.uid,additionalInfo:this.addInfo,creationTime:Date.now(),postalCode:this.postalCode,street:this.street,city:this.city,photoUrls:[],lat:this.lat,lng:this.lng,price:this.price,surface:this.surface,smoking:this.smoking,pets:this.pets}).then(function(e){t.title="",t.addInfo="",t.city="",t.street="",t.postalCode="",t.errorMessage="",t.price=0,t.surface=0,t.smoking=!0,t.pets=!0;var a=[];t.imagesData.forEach(function(t,i){u.a.storage().ref(t.key).put(t.photo).then(function(t){return t.ref.getDownloadURL()}).then(function(t){a.push(t),C.collection("locations").doc(e.id).update({photoUrls:a})})}),t.$router.push({name:"AllLocations",params:{message:"Location added succesfully!"}})})):this.errorMessage="Please fill in all mandatory fields"},removeImg:function(t){this.imagesData=this.imagesData.filter(function(e){return e.url!=t})},renderMap:function(t,e){this.lat=t,this.lng=e;var a=new google.maps.Map(document.getElementById("map"),{center:{lat:t,lng:e},zoom:6,maxZoom:15,minZoom:3,streetViewControl:!1});this.marker=new google.maps.Marker({position:{lat:t,lng:e},map:a,draggable:!0,title:"Drag me!"})},fetchGeolocation:function(){var t=this;navigator.geolocation?navigator.geolocation.getCurrentPosition(function(e){t.renderMap(e.coords.latitude,e.coords.longitude)}):this.renderMap(50,50)},fetchLocationDataBasedOnLatLng:function(){var t="https://maps.googleapis.com/maps/api/geocode/json?latlng="+this.lat+"%2C"+this.lng+"&language=en%27&key=AIzaSyD3PvboTyHdrjFFm8ExoEyFruWZhu3wIo0",e=new XMLHttpRequest;e.open("GET","https://warm-refuge-39243.herokuapp.com/"+t),e.send();var a=this;e.onload=function(){200==e.status&&JSON.parse(e.response).results.forEach(function(t){t.address_components.forEach(function(t){null!=t.types&&(t.types.includes("route")?a.street=a.street||t.long_name:t.types.includes("administrative_area_level_2")?a.city=a.city||t.long_name:t.types.includes("postal_code")&&(a.postalCode=a.postalCode||t.long_name))})})}}},mounted:function(){this.fetchGeolocation()}},F={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{},[a("div",{staticClass:"field right margin10",attrs:{id:"btnSave"},on:{click:t.closeMap}},[a("button",{staticClass:"btn btn-large deep-purple",on:{click:function(e){return e.preventDefault(),t.showMap(e)}}},[t._v("Save "),a("i",{staticClass:"fa fa-floppy-o"})])]),t._v(" "),a("div",{staticClass:"my-container container",attrs:{id:"mainContainer"}},[a("form",{staticClass:"card-panel",on:{submit:function(e){return e.preventDefault(),t.addNewLocation(e)}}},[a("h2",{staticClass:"center deep-purple-text"},[t._v("Add new location")]),t._v(" "),a("div",{staticClass:"field"},[a("label",{attrs:{for:"addInfo"}},[t._v("Location on map*")]),t._v(" "),a("div",{staticClass:"field center margin10"},[a("button",{staticClass:"btn deep-purple",on:{click:function(e){return e.preventDefault(),t.showMap(e)}}},[t._v("Mark location on map")])])]),t._v(" "),a("div",{staticClass:"field"},[a("label",{attrs:{for:"title"}},[t._v("Title*")]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.title,expression:"title"}],attrs:{id:"title",type:"text"},domProps:{value:t.title},on:{input:function(e){e.target.composing||(t.title=e.target.value)}}})]),t._v(" "),a("div",{staticClass:"field"},[a("label",{attrs:{for:"city"}},[t._v("City*")]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.city,expression:"city"}],attrs:{id:"city",type:"text"},domProps:{value:t.city},on:{input:function(e){e.target.composing||(t.city=e.target.value)}}})]),t._v(" "),a("div",{staticClass:"field"},[a("label",{attrs:{for:"street"}},[t._v("Street*")]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.street,expression:"street"}],attrs:{id:"street",type:"text"},domProps:{value:t.street},on:{input:function(e){e.target.composing||(t.street=e.target.value)}}})]),t._v(" "),a("div",{staticClass:"field"},[a("label",{attrs:{for:"postalCode"}},[t._v("Postal code")]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.postalCode,expression:"postalCode"}],attrs:{id:"postalCode",type:"text"},domProps:{value:t.postalCode},on:{input:function(e){e.target.composing||(t.postalCode=e.target.value)}}})]),t._v(" "),a("div",{staticClass:"field"},[a("label",{attrs:{for:"price"}},[t._v("Price (in PLN)*")]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.price,expression:"price"}],attrs:{id:"price",type:"number"},domProps:{value:t.price},on:{input:function(e){e.target.composing||(t.price=e.target.value)}}})]),t._v(" "),a("div",{staticClass:"field"},[a("label",{attrs:{for:"surface"}},[t._v("Surface of apartment*")]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.surface,expression:"surface"}],attrs:{id:"surface",type:"number"},domProps:{value:t.surface},on:{input:function(e){e.target.composing||(t.surface=e.target.value)}}})]),t._v(" "),a("div",{staticClass:"field"},[a("label",{attrs:{for:"addInfo"}},[t._v("Additional info*")]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.addInfo,expression:"addInfo"}],attrs:{id:"addInfo",type:"text"},domProps:{value:t.addInfo},on:{input:function(e){e.target.composing||(t.addInfo=e.target.value)}}})]),t._v(" "),a("div",{staticClass:"field"},[a("label",[a("input",{directives:[{name:"model",rawName:"v-model",value:t.smoking,expression:"smoking"}],attrs:{type:"checkbox"},domProps:{checked:Array.isArray(t.smoking)?t._i(t.smoking,null)>-1:t.smoking},on:{change:function(e){var a=t.smoking,i=e.target,n=!!i.checked;if(Array.isArray(a)){var o=t._i(a,null);i.checked?o<0&&(t.smoking=a.concat([null])):o>-1&&(t.smoking=a.slice(0,o).concat(a.slice(o+1)))}else t.smoking=n}}}),t._v(" "),a("span",[t._v("Smoking allowed")])])]),t._v(" "),a("div",{staticClass:"field"},[a("label",[a("input",{directives:[{name:"model",rawName:"v-model",value:t.pets,expression:"pets"}],attrs:{type:"checkbox"},domProps:{checked:Array.isArray(t.pets)?t._i(t.pets,null)>-1:t.pets},on:{change:function(e){var a=t.pets,i=e.target,n=!!i.checked;if(Array.isArray(a)){var o=t._i(a,null);i.checked?o<0&&(t.pets=a.concat([null])):o>-1&&(t.pets=a.slice(0,o).concat(a.slice(o+1)))}else t.pets=n}}}),t._v(" "),a("span",[t._v("Pets allowed")])])]),t._v(" "),a("div",{staticClass:"field"},[a("label",{attrs:{for:"photo"}},[t._v("Apartment photos")]),t._v(" "),a("input",{attrs:{id:"photo",type:"file",accept:"image/*"},on:{change:t.onFilePicked}})]),t._v(" "),t._l(t.imagesData,function(e,i){return a("img",{attrs:{height:"150",width:"200",src:e.url},on:{click:function(a){return t.removeImg(e.url)}}})}),t._v(" "),t.errorMessage?a("p",{staticClass:"red-text center"},[t._v(t._s(t.errorMessage))]):t._e(),t._v(" "),t._m(0)],2)]),t._v(" "),a("div",{staticClass:"google-map-input",attrs:{id:"map"}})])},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"field center margin10"},[e("button",{staticClass:"btn deep-purple"},[this._v("Add new location")])])}]};var z=a("VU/8")(B,F,!1,function(t){a("8SSc")},null,null).exports,q={name:"ViewLocation",data:function(){return{location:{},contactData:{}}},methods:{getNearbyPlaces:function(){this.renderMap();var t="https://maps.googleapis.com/maps/api/place/nearbysearch/json?location="+this.location.lat+","+this.location.lng+"&radius=2000&key=AIzaSyD3PvboTyHdrjFFm8ExoEyFruWZhu3wIo0",e=new XMLHttpRequest;e.open("GET","https://warm-refuge-39243.herokuapp.com/"+t),e.send();var a=this;e.onload=function(){200==e.status&&JSON.parse(e.response).results.forEach(function(t){new google.maps.Marker({position:{lat:t.geometry.location.lat,lng:t.geometry.location.lng},map:a.map,title:t.name,icon:{url:a.getIconUrl(t.types)}})})}},getIconUrl:function(t){return(t=t.join("")).indexOf("hospital")>-1||t.indexOf("health")>-1?"https://fv9-1.failiem.lv/thumb_show.php?i=rx8j5u6d&view&download_checksum=fc01072040e918378119624b66c2187f98be5fcb&download_timestamp=1588326863":t.indexOf("political")>-1||t.indexOf("post_office")>-1?"https://fv9-2.failiem.lv/thumb_show.php?i=f8fmts6w&view&download_checksum=a19d64ebe45775ab4c32d46e27c9e37850f0e985&download_timestamp=1588326865":t.indexOf("school")>-1||t.indexOf("education")>-1?"https://fv9-2.failiem.lv/thumb_show.php?i=gkvqm5m9&view&download_checksum=daba200bc124d041902411e6a4f84c3875dba85e&download_timestamp=1588326862":t.indexOf("store")>-1||t.indexOf("food")>-1?"https://fv9-2.failiem.lv/thumb_show.php?i=v4jp666a&view&download_checksum=4018dbd476c3b2e280dc3f1a6f492741a0a949b4&download_timestamp=1588326858":t.indexOf("church")>-1||t.indexOf("worship")>-1?"https://fv9-1.failiem.lv/thumb_show.php?i=emw3pd2p&view&download_checksum=6d1c53b296eb9991840a7bdddeab56007b04998a&download_timestamp=1588326860":t.indexOf("sport")>-1||t.indexOf("gym")>-1?"https://fv9-2.failiem.lv/thumb_show.php?i=99nuuc6x&view&download_checksum=aede89127215d9c4ea072572e3442a839a4b851f&download_timestamp=1588326867":"http://maps.google.com/mapfiles/ms/icons/red-dot.png"},renderMap:function(){this.map=new google.maps.Map(document.getElementById("map"),{center:{lat:this.location.lat,lng:this.location.lng},zoom:14,maxZoom:16,minZoom:14});new google.maps.Marker({position:{lat:this.location.lat,lng:this.location.lng},map:this.map,title:this.location.title})}},mounted:function(){var t=this;C.collection("locations").doc(this.$route.params.id).get().then(function(e){e.exists?(t.location=e.data(),t.getNearbyPlaces(),C.collection("users").where("user_id","==",t.location.ownerId).get().then(function(e){e.forEach(function(e){t.contactData={phoneNumer:e.data().phoneNumber,email:e.data().email?e.data().email:e.id,name:e.data().name,otherCommunication:e.data().otherCommunication}})})):t.$router.push({name:"AllLocations",params:{message:"Location does not exists"}})})}},O={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"my-container container"},[a("div",{staticClass:"card-panel"},[a("div",{staticClass:"field center deep-purple-text"},[a("h3",[t._v(t._s(t.location.title))])]),t._v(" "),a("div",{staticClass:"field"},[a("p",{staticClass:"card-element"},[t._v("Price: "+t._s(t.location.price)+" [PLN]")]),t._v(" "),a("p",{staticClass:"card-element"},[t._v("Postal code: "+t._s(t.location.postalCode))]),t._v(" "),a("p",{staticClass:"card-element"},[t._v("City: "+t._s(t.location.city))]),t._v(" "),a("p",{staticClass:"card-element"},[t._v("Street: "+t._s(t.location.street))]),t._v(" "),a("p",{staticClass:"card-element"},[t._v("Surface: "+t._s(t.location.surface)+" [m^2]")]),t._v(" "),a("p",{staticClass:"card-element"},[t._v("Pets allowed: "+t._s(t.location.pets))]),t._v(" "),a("p",{staticClass:"card-element"},[t._v("Smoking allowed: "+t._s(t.location.smoking))])]),t._v(" "),a("div",{staticClass:"field"},[a("h5",[t._v("Additional information:")]),t._v(" "),a("p",[t._v(t._s(t.location.additionalInfo))])]),t._v(" "),a("div",{staticClass:"field"},[a("h5",[t._v("Apartment gallery:")]),t._v(" "),t._l(t.location.photoUrls,function(t,e){return a("img",{directives:[{name:"img",rawName:"v-img"}],key:t,staticClass:"card-element",attrs:{src:t}})})],2),t._v(" "),a("div",{staticClass:"field"},[a("h5",[t._v("Contact data:")]),t._v(" "),a("div",{staticClass:"field"},[t.contactData.name?a("p",{staticClass:"card-element"},[t._v("Tenant name: "+t._s(t.contactData.name))]):t._e(),t._v(" "),t.contactData.email?a("p",{staticClass:"card-element"},[t._v("Email: "+t._s(t.contactData.email))]):t._e(),t._v(" "),t.contactData.phoneNumer?a("p",{staticClass:"card-element"},[t._v("Phone number: "+t._s(t.contactData.phoneNumer))]):t._e(),t._v(" "),t.contactData.otherCommunication?a("p",{staticClass:"card-element"},[t._v("Additional information: "+t._s(t.contactData.otherCommunication))]):t._e()])]),t._v(" "),t._m(0)])])},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"field"},[e("div",{staticClass:"google-map",attrs:{id:"map"}})])}]};var T=a("VU/8")(q,O,!1,function(t){a("Q8Fi")},"data-v-77430aac",null).exports,V={name:"UserLocations",data:function(){return{locations:[]}},methods:{goToNewLocation:function(){this.$router.push({name:"NewLocation"})},remove:function(t){confirm("Do you really want to delete this location?")&&(C.collection("locations").doc(t).delete(),this.locations=this.locations.filter(function(e){return e.id!=t}))},edit:function(t){this.$router.push({name:"EditLocation",params:{id:t}})}},mounted:function(){var t=this;this.locations=[],C.collection("locations").get().then(function(e){e.forEach(function(e){var a=e.data();a.id=e.id,a.ownerId==u.a.auth().currentUser.uid&&t.locations.push(a)})})}},R={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"my-container container"},[a("div",{staticClass:"card-panel"},[t.locations.length>0?a("span",[t._m(0),t._v(" "),a("ul",t._l(t.locations,function(e,i){return a("li",{key:i},[t._v("\n            "+t._s(e.title)+"\n            "),a("span",{on:{click:function(a){return a.preventDefault(),t.remove(e.id)}}},[a("i",{staticClass:"fa fa-times right remove icon",attrs:{"aria-hidden":"false"}})]),t._v(" "),a("span",{on:{click:function(a){return a.preventDefault(),t.edit(e.id)}}},[a("i",{staticClass:"fa fa-pencil-square-o right edit icon",attrs:{"aria-hidden":"false"}})])])}),0)]):a("span",[t._m(1)]),t._v(" "),a("div",{staticClass:"field center margin20"},[a("button",{staticClass:"btn deep-purple",on:{click:t.goToNewLocation}},[t._v("Add new location")])])])])},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"field center deep-purple-text"},[e("h3",[this._v("Your locations:")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"field center deep-purple-text"},[e("h4",[this._v("No current locations, click below to add one "),e("i",{staticClass:"fa fa-arrow-circle-down",attrs:{"aria-hidden":"true"}})])])}]};var j=a("VU/8")(V,R,!1,function(t){a("0LL4")},"data-v-60edd058",null).exports,W={name:"EditLocation",data:function(){return{location:{},imagesData:[],errorMessage:null}},methods:{showMap:function(){document.getElementById("map").style.display="block",document.getElementById("btnSave").style.display="block",document.getElementById("mainContainer").style.display="none"},closeMap:function(){document.getElementById("map").style.display="none",document.getElementById("btnSave").style.display="none",document.getElementById("mainContainer").style.display="block",this.location.lat=this.marker.position.lat(),this.location.lng=this.marker.position.lng(),this.fetchLocationDataBasedOnLatLng()},onFilePicked:function(t){var e=this,a=t.target.files,i=(a[0].name,new FileReader);i.addEventListener("load",function(){e.imagesData.push({url:i.result,photo:a[0],key:u.a.auth().currentUser.uid+"_"+a[0].name})}),i.readAsDataURL(a[0])},editData:function(){var t=this;if(this.location.title&&this.location.city&&this.location.street&&this.location.additionalInfo&&this.location.lat&&this.location.price&&this.location.surface){this.errorMessage=null;var e=this.imagesData.filter(function(t){return null==t.photo}).map(function(t){return t.url}),a=this.location.id;C.collection("locations").doc(a).update({title:this.location.title,ownerId:u.a.auth().currentUser.uid,additionalInfo:this.location.additionalInfo,creationTime:Date.now(),postalCode:this.location.postalCode,street:this.location.street,city:this.location.city,photoUrls:e,lat:this.location.lat,lng:this.location.lng,price:this.location.price,surface:this.location.surface,smoking:this.location.smoking,pets:this.location.pets}).then(function(){t.imagesData.forEach(function(t,i){t.photo&&u.a.storage().ref(t.key).put(t.photo).then(function(t){return t.ref.getDownloadURL()}).then(function(t){e.push(t),C.collection("locations").doc(a).update({photoUrls:e})})}),t.$router.push({name:"AllLocations",params:{message:"Location edited succesfully!"}})})}else this.errorMessage="Please fill in all mandatory fields"},removeImg:function(t){this.imagesData=this.imagesData.filter(function(e){return e.url!=t})},renderMap:function(t,e){var a=new google.maps.Map(document.getElementById("map"),{center:{lat:t,lng:e},zoom:6,maxZoom:15,minZoom:3,streetViewControl:!1});this.marker=new google.maps.Marker({position:{lat:t,lng:e},map:a,draggable:!0,title:"Drag me!"})},fetchData:function(){var t=this;C.collection("locations").doc(this.$route.params.id).get().then(function(e){e.exists?(t.location=e.data(),t.location.id=e.id,t.imagesData=e.data().photoUrls.map(function(t){return{url:t}}),t.renderMap(t.location.lat,t.location.lng)):t.$router.push({name:"AllLocations",params:{message:"Location does not exists"}})})},fetchLocationDataBasedOnLatLng:function(){var t="https://maps.googleapis.com/maps/api/geocode/json?latlng="+this.location.lat+"%2C"+this.location.lng+"&language=en%27&key=AIzaSyD3PvboTyHdrjFFm8ExoEyFruWZhu3wIo0",e=new XMLHttpRequest;e.open("GET","https://warm-refuge-39243.herokuapp.com/"+t),e.send();var a=this.location;this.location.city=null,this.location.postalCode=null,this.location.street=null,e.onload=function(){200==e.status&&JSON.parse(e.response).results.forEach(function(t){t.address_components.forEach(function(t){null!=t.types&&(t.types.includes("route")&&!t.long_name.startsWith("Unnamed")?a.street=a.street||t.long_name:t.types.includes("administrative_area_level_2")&&!t.long_name.startsWith("Unnamed")?a.city=a.city||t.long_name:t.types.includes("postal_code")&&!t.long_name.startsWith("Unnamed")&&(a.postalCode=a.postalCode||t.long_name))})})}}},mounted:function(){this.fetchData()}},H={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{},[a("div",{staticClass:"field right margin10",attrs:{id:"btnSave"},on:{click:t.closeMap}},[a("button",{staticClass:"btn btn-large deep-purple",on:{click:function(e){return e.preventDefault(),t.showMap(e)}}},[t._v("Save "),a("i",{staticClass:"fa fa-floppy-o"})])]),t._v(" "),a("div",{staticClass:"my-container container",attrs:{id:"mainContainer"}},[a("form",{staticClass:"card-panel",on:{submit:function(e){return e.preventDefault(),t.editData(e)}}},[a("h2",{staticClass:"center deep-purple-text"},[t._v("EditLocation")]),t._v(" "),a("div",{staticClass:"field"},[a("label",{attrs:{for:"additionalInfo"}},[t._v("Location on map*")]),t._v(" "),a("div",{staticClass:"field center margin10"},[a("button",{staticClass:"btn deep-purple",on:{click:function(e){return e.preventDefault(),t.showMap(e)}}},[t._v("Change location on map")])])]),t._v(" "),a("div",{staticClass:"field"},[a("label",{attrs:{for:"title"}},[t._v("Title*")]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.location.title,expression:"location.title"}],attrs:{id:"title",type:"text"},domProps:{value:t.location.title},on:{input:function(e){e.target.composing||t.$set(t.location,"title",e.target.value)}}})]),t._v(" "),a("div",{staticClass:"field"},[a("label",{attrs:{for:"city"}},[t._v("City*")]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.location.city,expression:"location.city"}],attrs:{id:"city",type:"text"},domProps:{value:t.location.city},on:{input:function(e){e.target.composing||t.$set(t.location,"city",e.target.value)}}})]),t._v(" "),a("div",{staticClass:"field"},[a("label",{attrs:{for:"street"}},[t._v("Street*")]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.location.street,expression:"location.street"}],attrs:{id:"street",type:"text"},domProps:{value:t.location.street},on:{input:function(e){e.target.composing||t.$set(t.location,"street",e.target.value)}}})]),t._v(" "),a("div",{staticClass:"field"},[a("label",{attrs:{for:"postalCode"}},[t._v("Postal code")]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.location.postalCode,expression:"location.postalCode"}],attrs:{id:"postalCode",type:"text"},domProps:{value:t.location.postalCode},on:{input:function(e){e.target.composing||t.$set(t.location,"postalCode",e.target.value)}}})]),t._v(" "),a("div",{staticClass:"field"},[a("label",{attrs:{for:"price"}},[t._v("Price (in PLN)*")]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.location.price,expression:"location.price"}],attrs:{id:"price",type:"number"},domProps:{value:t.location.price},on:{input:function(e){e.target.composing||t.$set(t.location,"price",e.target.value)}}})]),t._v(" "),a("div",{staticClass:"field"},[a("label",{attrs:{for:"surface"}},[t._v("Surface of apartment*")]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.location.surface,expression:"location.surface"}],attrs:{id:"surface",type:"number"},domProps:{value:t.location.surface},on:{input:function(e){e.target.composing||t.$set(t.location,"surface",e.target.value)}}})]),t._v(" "),a("div",{staticClass:"field"},[a("label",{attrs:{for:"additionalInfo"}},[t._v("Additional info*")]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.location.additionalInfo,expression:"location.additionalInfo"}],attrs:{id:"additionalInfo",type:"text"},domProps:{value:t.location.additionalInfo},on:{input:function(e){e.target.composing||t.$set(t.location,"additionalInfo",e.target.value)}}})]),t._v(" "),a("div",{staticClass:"field"},[a("label",[a("input",{directives:[{name:"model",rawName:"v-model",value:t.location.smoking,expression:"location.smoking"}],attrs:{type:"checkbox"},domProps:{checked:Array.isArray(t.location.smoking)?t._i(t.location.smoking,null)>-1:t.location.smoking},on:{change:function(e){var a=t.location.smoking,i=e.target,n=!!i.checked;if(Array.isArray(a)){var o=t._i(a,null);i.checked?o<0&&t.$set(t.location,"smoking",a.concat([null])):o>-1&&t.$set(t.location,"smoking",a.slice(0,o).concat(a.slice(o+1)))}else t.$set(t.location,"smoking",n)}}}),t._v(" "),a("span",[t._v("Smoking allowed")])])]),t._v(" "),a("div",{staticClass:"field"},[a("label",[a("input",{directives:[{name:"model",rawName:"v-model",value:t.location.pets,expression:"location.pets"}],attrs:{type:"checkbox"},domProps:{checked:Array.isArray(t.location.pets)?t._i(t.location.pets,null)>-1:t.location.pets},on:{change:function(e){var a=t.location.pets,i=e.target,n=!!i.checked;if(Array.isArray(a)){var o=t._i(a,null);i.checked?o<0&&t.$set(t.location,"pets",a.concat([null])):o>-1&&t.$set(t.location,"pets",a.slice(0,o).concat(a.slice(o+1)))}else t.$set(t.location,"pets",n)}}}),t._v(" "),a("span",[t._v("Pets allowed")])])]),t._v(" "),a("div",{staticClass:"field"},[a("label",{attrs:{for:"photo"}},[t._v("Apartment photos")]),t._v(" "),a("input",{attrs:{id:"photo",type:"file",accept:"image/*"},on:{change:t.onFilePicked}})]),t._v(" "),t._l(t.imagesData,function(e,i){return a("img",{key:i,attrs:{height:"150",width:"200",src:e.url},on:{click:function(a){return t.removeImg(e.url)}}})}),t._v(" "),t.errorMessage?a("p",{staticClass:"red-text center"},[t._v(t._s(t.errorMessage))]):t._e(),t._v(" "),t._m(0)],2)]),t._v(" "),a("div",{staticClass:"google-map-input",attrs:{id:"map"}})])},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"field center margin10"},[e("button",{staticClass:"btn deep-purple"},[this._v("Save")])])}]};var Z=a("VU/8")(W,H,!1,function(t){a("RagM")},null,null).exports;i.a.use(f.a);var G=new f.a({routes:[{path:"/",name:"AllLocations",component:D,meta:{requiresAuth:!0}},{path:"/signup",name:"Signup",component:E},{path:"/login",name:"Login",component:N},{path:"/profile",name:"ViewProfile",component:U,meta:{requiresAuth:!0}},{path:"/location",name:"NewLocation",component:z,meta:{requiresAuth:!0}},{path:"/userLocations",name:"UserLocations",component:j,meta:{requiresAuth:!0}},{path:"/location/:id",name:"ViewLocation",component:T,meta:{requiresAuth:!0}},{path:"/editLocation/:id",name:"EditLocation",component:Z,meta:{requiresAuth:!0}}]});G.beforeEach(function(t,e,a){t.matched.some(function(t){return t.meta.requiresAuth})?u.a.auth().currentUser?a():a({name:"Login"}):a()});var Y=G;i.a.config.productionTip=!1,i.a.use(l);var K=null;u.a.auth().onAuthStateChanged(function(){K||(K=new i.a({el:"#app",router:Y,components:{App:h},template:"<App/>"}))})},"NW/g":function(t,e){},Q8Fi:function(t,e){},RagM:function(t,e){},fvCD:function(t,e){},rKFi:function(t,e){}},["NHnr"]);
//# sourceMappingURL=app.70671c4b90296d329c0f.js.map